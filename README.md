# プロジェクト名

## 概要

このリポジトリは、私が参加している **J-PARC muon g-2/EDM実験** に関連するプログラムの抜粋を掲載しています。

私はこの実験において、検出された素粒子のデータ収集を担う **データ収集システム（DAQシステム）** の構築を担当しています。  
具体的には、次のような作業を行っています：
- 実験で流されるデータを模したダミーデータを生成。
- 自作のデータ収集システムで転送・処理を行い、安定性を評価。
- 実験に適したシステム構成案の検討および改良。

このリポジトリでは、システム構築の一部を抜粋し、動作例や説明を **README** にまとめています。  
全コードを含めると依存ライブラリや環境構築が複雑になるため、主要な部分のみを公開しています。
主に、ハードウェア（FPGA設計）とソフトウェア（データ解析）のコードを含み、以下のように分けられます。
- **ハードウェア:** データ収集用FPGAの制御および通信設計（Verilog）  
- **ソフトウェア:** 収集データの解析スクリプト（C++ / Python）  

具体的な構成としては以下の主要なコンポーネントで構成されています：
- **DAQMW:** DAQMWを用いたデータ収集システム関連のコード  
- **data_analyze:** 取得データの解析スクリプト（Python, C++）  
- **slit:** FPGA制御に関するファイル(本当に一部のみ)  
このリポジトリでは、環境構築が困難なため、主要なコードを抜粋して掲載し、  
その動作例や説明をREADMEにまとめています。
## ファイル構成
<pre>
/data_transfer
│-- /DAQMW                  # DAQMWを用いたデータ収集システム関連のコード
│   │-- reader-merger-conditionlogger.xml  # DAQMWの制御用コード
│   │-- README.md                          # DAQMWモジュールの説明
│
│-- /data_analyze           # データ解析用スクリプト
│   │-- run_setup.sh                       # 計測準備用
│   │-- run_wr_trg.sh                      # 計測開始用
│   │-- run_extract_data.sh                # 測定結果から必要なデータを抽出
│   │-- run_measure_data_parallel.sh       # 複数基板でデータ転送を開始、測定
│   │-- run_measure_data.sh                # 基板でデータ転送を開始、測定
│   │-- run_analyze_data_select.sh         # データ解析の一連の流れ(測定結果をデコードし、必要なデータを抽出)をマクロ化したもの
│   │-- process_emptybits_daq.py           # DAQMWの測定データから必要なデータを選択
│   │-- process_emptybits.py               # 通常の測定データから必要なデータを選択
│   │-- change_mode.py                     # データから最頻値を計算し出力
│   │-- run_plot_total_graph.cpp           # イベントの抜けのグラフを作成
│   │-- run_plot_mode_graph.cpp            # 転送時間の推移のグラフを作成
│   │-- sampledata.txt                     # サンプルデータ
│   │-- sampleresult.png                   # サンプル画像
│   │-- README.md                          # モジュールの説明
│
│-- /slit                   # FPGA制御に関するファイル
│   │-- SLIT_TOP.sv                        # FPGA全体の制御部分
│   │-- SLIT_REG.sv                        # FPGAのレジスタ設定
│   │-- TEST_FIFO.sv                       # ダミーデータ生成部分
│   │-- FLOW_RATE_ADJUSTMENT.sv            # 流量調整部分
│   │-- README.md                          # FPGAモジュールの説明
│
│-- README.md                 # プロジェクトの概要と説明

</pre>

## 制作期間
2024年4月 〜 2024年12月

### 注意事項
- 実験固有の依存ライブラリや構成環境は含まれていません。
- 各モジュールの詳細は、該当する **README.md** を参照してください。
