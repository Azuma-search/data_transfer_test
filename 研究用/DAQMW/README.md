# DAQMW - データ収集システム

## 1. 概要 (Overview)
このフォルダには、DAQMW（DAQ-MiddleWare）を用いたデータ収集システムに関連するコードが含まれています。
DAQMWは、高エネルギー物理実験などの大規模データ収集システムに対応するために設計されたミドルウェアです。
研究では、データ収集の簡単な再現、またデータ収集に使用するネットワークスイッチ、基板等の仕様確認のために自作のデータ収集プログラムを使用していますが、
本来の実験により近づけるため最終的な試験では自作のデータ収集プログラムではなくDAQMWを使用します。
これはそのDAQMWを動かすためのファイルの抜粋になります。

### 1. `reader-merger-conditionlogger.xml`  
このXMLファイルは、DAQMWのデータ収集フローを構成する主要コンポーネントの設定を定義しています。
#### 1.1 データリーダー（SliTDaqmwReader10～SliTDaqmwReader40）
- 各データリーダーは別々のデータソースからデータを取得します。
  - データソースは、`srcAddr`（IPアドレス）と`srcPort`（ポート番号）で指定されています。
    - 例:
      - `SliTDaqmwReader10`: `srcAddr=192.168.8.13`, `srcPort=24`
      - `SliTDaqmwReader20`: `srcAddr=192.168.8.14`, `srcPort=24`
  - デバッグ情報の出力が有効（`debugMessage=1`）。
- 各リーダーはデータをそれぞれの出力ポート（例: `slitdaqmwreader1_out`）を介して送信します。
---
#### 1.2 データマージャー（Merger0）
- データリーダーから送られてくるデータを統合する役割を持っています。
  - 入力ポート:
    - `merger_in_0`: `SliTDaqmwReader10`からデータを受け取る。
    - `merger_in_1`: `SliTDaqmwReader20`からデータを受け取る。
    - その他、各リーダーに対応した入力ポートを設定。
  - 各ポートのバッファ長は`4096`に設定。
- 統合後のデータは、単一の出力ポート（`merger_out`）から送信されます。
---
#### 1.3 データロガー（SliTDaqmwLogger0）
- マージされたデータを受け取り、指定された条件でログとして記録します。
  - 主なパラメータ:
    - `dirName`: ログファイルの保存先ディレクトリ（例: `test`）。
    - `maxFileSizeInGigaByte`: ログファイルの最大サイズ（例: 20GB）。
  - ダミーファイル生成機能が有効（`isMakeDummyFile=1`）。
---

#### 1.4 実行順序
- 各コンポーネントには`startOrd`が設定されており、この順序で初期化されます：
  1. データロガー（`startOrd=1`）
  2. データマージャー（`startOrd=2`）
  3. データリーダー（`startOrd=3～6`）

## 制作期間
2024年11月 〜 2024年12月
